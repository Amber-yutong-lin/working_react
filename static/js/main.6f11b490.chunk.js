(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a.p+"static/media/page1.40426632.gif"},27:function(e,t,a){e.exports=a(45)},36:function(e,t,a){},37:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(14),r=a.n(l),s=(a(36),a(6)),c=a(7),o=a(9),u=a(8),m=a(10),d=(a(37),a(4)),h=a(25),g=a.n(h),f=(a(42),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"page1"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"page-enter"},i.a.createElement(d.b,{to:"page2"},"make your Polaroid Story")),i.a.createElement("img",{src:g.a,alt:"img"})),i.a.createElement("div",{className:"footer"},i.a.createElement("span",{className:"footer-homepage fr"},"homepage of Polaroid memory."))))}}]),t}(n.Component)),p=(a(43),[]),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={searchValue:"",selectedAlbumId:"",albumList:p},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.state.albumList;p=e}},{key:"addAlbum",value:function(e){e.preventDefault();var t=this.state.albumList,a=t.length+1;t.push({id:a,name:"album"+a,active:!1}),this.setState({searchValue:"",albumList:t})}},{key:"handleOnchangeValue",value:function(e,t){for(var a=this.state.albumList,n=0;n<a.length;n++)if(a[n].id===e){a[n].name=t.target.value,this.setState({albumList:a});break}}},{key:"handleFilterValue",value:function(e){this.setState({searchValue:e.target.value})}},{key:"filterAlbum",value:function(){var e=this.state,t=e.albumList,a=e.searchValue;return t.filter(function(e){return e.name.toLowerCase().indexOf(a.toLowerCase())>=0||""===a})}},{key:"handleActive",value:function(e,t){t.preventDefault();for(var a=this.state.albumList,n=0;n<a.length;n++)a[n].id===e?(a[n].active=!a[n].active,this.setState({selectedAlbumId:e,albumList:a})):a[n].active=!1}},{key:"handleGoPage3",value:function(e){e.preventDefault();var t=this.state.selectedAlbumId;""!==t?this.props.history.push("/page3/"+t):alert("select The album")}},{key:"render",value:function(){var e=this,t=this.state,a=t.albumList,n=t.searchValue;return a=this.filterAlbum(),i.a.createElement("div",{className:"page2"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"p40 page2-inner"},i.a.createElement("p",{className:"page2-title"},"create an album"),i.a.createElement("p",{className:"page2-search"},i.a.createElement("input",{placeholder:"Search for album",onChange:this.handleFilterValue.bind(this),value:n,type:"text"})),i.a.createElement("ul",{className:"album-list clearfix"},a.map(function(t,a){return i.a.createElement("li",{key:a},i.a.createElement(d.b,{to:"/page3/".concat(t.id)},i.a.createElement("div",{className:"album-img ".concat(t.active&&"active")})),i.a.createElement("div",{className:"album-name"},i.a.createElement("input",{value:t.name,onChange:e.handleOnchangeValue.bind(e,t.id),type:"text",autoFocus:!0})))}),i.a.createElement("li",null,i.a.createElement("a",{href:"",onClick:this.addAlbum.bind(this)},i.a.createElement("div",{className:"album-img"},i.a.createElement("div",{className:"add-img"}),i.a.createElement("div",{className:"add-text"},"New Ablum"))))))),i.a.createElement("div",{className:"footer"},i.a.createElement("span",{className:"footer-left fl"},i.a.createElement(d.b,{to:"/"},"Back")," to homepage."))))}}]),t}(n.Component),b=(a(44),a(26)),E=a.n(b),y=[],k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={imgUrlValue:"",curImgId:"",curId:"",uploadList:y,isDrag:!1,titleName:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.state.uploadList;y=e}},{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.id,a=this.state.uploadList,n=a.some(function(e){return e.id===t});console.log(p),p.forEach(function(a){a.id==t&&e.setState({titleName:a.name})}),n||(a.push({id:t,list:[{imgId:1,imgUrl:"",x:0,y:0,zIndex:0},{imgId:2,imgUrl:"",x:0,y:0,zIndex:1},{imgId:3,imgUrl:"",x:0,y:0,zIndex:2},{imgId:4,imgUrl:"",x:0,y:0,zIndex:3}]}),this.setState({uploadList:a}))}},{key:"getCurUploadList",value:function(){var e=this.props.match.params.id,t=this.state.uploadList.filter(function(t,a){return t.id===e});return t.length>0?t[0]:{}}},{key:"handleChangeFile",value:function(e,t){var a=this.refs.uploadImg;this.setState({curImgId:t,curId:e},function(){a.click()})}},{key:"onChangeUpload",value:function(e){var t=new FileReader,a=e.target.files[0],n=this,i=this.state,l=i.curImgId,r=i.curId,s=i.uploadList;a&&(t.readAsDataURL(a),t.onload=function(){for(var e=0;e<s.length;e++)if(s[e].id===r){for(var t=s[e].list,a=0;a<t.length;a++)if(t[a].imgId===l){t[a].imgUrl=this.result,s[e].list=t;break}break}n.setState({imgUrlValue:"",uploadList:s})})}},{key:"handleStop",value:function(e,t){console.log(t),this.handleDraggableFn({state:1,dataId:this.children.props["data-id"],DraggableData:t})}},{key:"handleDrag",value:function(){}},{key:"handleStart",value:function(){this.handleDraggableFn({state:0,ref:this.children.ref})}},{key:"handleDraggableFn",value:function(e){var t=e.state,a=e.DraggableData,n=e.dataId;if(0===t)this.refs[e.ref].style.zIndex=1e3,this.setState({isDrag:!0});else{var i=this.props.match.params.id,l=this.state.uploadList,r=l.filter(function(e,t){return e.id===i}),s=[];s=(s=r[0].list.slice(0)).sort(function(e,t){return e.zIndex>t.zIndex});var c=0;s.forEach(function(e,t){e.imgId===n?(e.zIndex=s.length-1,e.x=a.x,e.y=a.y):(e.zIndex=c,c++)}),s.sort(function(e,t){return e.imgId>t.imgId}),l.forEach(function(e,t){e.id!==i||(e.list=s)}),this.setState({isDrag:!1,uploadList:l})}}},{key:"addImg",value:function(){var e=this.props.match.params.id,t=this.state.uploadList;t.forEach(function(t){t.id===e&&t.list.push({imgId:t.list.length+1,imgUrl:"",x:0,y:0,zIndex:t.list.length})}),this.setState({uploadList:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.imgUrlValue,n=t.titleName,l=this.getCurUploadList();return i.a.createElement("div",{className:"page3"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"p40 page3-inner"},i.a.createElement("p",{className:"page2-title"},"upload your polaroid to ",n),i.a.createElement("ul",{className:"upload-list"},l.list.map(function(t,a){return i.a.createElement(E.a,{onStart:e.handleStart,handleDraggableFn:e.handleDraggableFn.bind(e),handle:".handle",onDrag:e.handleDrag,onStop:e.handleStop,defaultPosition:{x:t.x,y:t.y},key:a},i.a.createElement("li",{className:"handle",ref:"draggable".concat(a),"data-id":t.imgId,style:{zIndex:t.zIndex}},i.a.createElement("div",{className:"upload-list-inner"},i.a.createElement("img",{onClick:e.handleChangeFile.bind(e,l.id,t.imgId),src:t.imgUrl,alt:""}))))}),i.a.createElement("li",{onClick:this.addImg.bind(this)},i.a.createElement("div",{className:"album-img"},i.a.createElement("div",{className:"add-img"}),i.a.createElement("div",{className:"add-text"},"New frame")))))),i.a.createElement("input",{ref:"uploadImg",value:a,onChange:this.onChangeUpload.bind(this),type:"file",className:"hide"}),i.a.createElement("div",{className:"footer"},i.a.createElement("span",{className:"footer-left fl"},i.a.createElement(d.b,{to:"/page2"},"Back")," to create an album."))))}}]),t}(n.Component),I=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(d.c,{path:"/",exact:!0,component:f}),i.a.createElement(d.c,{path:"/page2",component:v}),i.a.createElement(d.c,{path:"/page3/:id",component:k}))}}]),t}(n.Component),N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(d.a,null,i.a.createElement(I,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/working_react",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/working_react","/service-worker.js");N?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):w(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):w(e)})}}()}},[[27,1,2]]]);
//# sourceMappingURL=main.6f11b490.chunk.js.map